import{d as S,r as k,a as B,o as D,c as N,e as n,w as a,f as s,g as _,E as c,h as u,l as E,m as T,n as U,i as p,t as m,b as f,_ as z}from"./index-Cun3tfJB.js";const I={class:"settings-container"},Q={class:"card-header"},j=S({__name:"Settings",setup(q){const g={"settings.title":"系统设置","settings.network":"局域网发现 (mDNS)","settings.mdns_enable":"开启广播","settings.mdns_name":"服务名称","common.save":"保存配置"},o=t=>g[t]||t,l=k(!1),e=B({enabled:!1,name:"",port:1883}),b=async()=>{l.value=!0;try{const t=await _.getMdnsConfig();e.enabled=t.data.enabled,e.name=t.data.name,e.port=t.data.port}catch(t){console.error(t),c.error("获取设置失败")}finally{l.value=!1}},v=async()=>{l.value=!0;try{await _.updateMdnsConfig(e.enabled,e.name),c.success("配置已更新")}catch(t){console.error(t),c.error("更新失败")}finally{l.value=!1}};return D(()=>{b()}),(t,r)=>{const h=s("el-divider"),w=s("el-switch"),d=s("el-form-item"),V=s("el-input"),y=s("el-button"),x=s("el-form"),C=s("el-card"),M=T("loading");return u(),N("div",I,[n(C,null,{header:a(()=>[f("div",Q,[f("span",null,m(o("settings.title")),1)])]),default:a(()=>[E((u(),U(x,{model:e,"label-width":"120px"},{default:a(()=>[n(h,{"content-position":"left"},{default:a(()=>[p(m(o("settings.network")),1)]),_:1}),n(d,{label:o("settings.mdns_enable")},{default:a(()=>[n(w,{modelValue:e.enabled,"onUpdate:modelValue":r[0]||(r[0]=i=>e.enabled=i)},null,8,["modelValue"])]),_:1},8,["label"]),n(d,{label:o("settings.mdns_name")},{default:a(()=>[n(V,{modelValue:e.name,"onUpdate:modelValue":r[1]||(r[1]=i=>e.name=i),disabled:!e.enabled,placeholder:"Mochi MQTT"},null,8,["modelValue","disabled"])]),_:1},8,["label"]),n(d,null,{default:a(()=>[n(y,{type:"primary",onClick:v},{default:a(()=>[p(m(o("common.save")),1)]),_:1})]),_:1})]),_:1},8,["model"])),[[M,l.value]])]),_:1})])}}}),F=z(j,[["__scopeId","data-v-3b8ea020"]]);export{F as default};
